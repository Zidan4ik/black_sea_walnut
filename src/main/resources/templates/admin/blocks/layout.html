<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout=""
      lang="uk"
      dir="ltr"
      data-theme="theme-default"
      data-assets-path="/static/">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link rel="stylesheet" th:href="@{/vuexy/assets/vendor/css/rtl/core.css}"/>
    <link rel="stylesheet" th:href="@{/vuexy/assets/vendor/css/rtl/theme-default.css}"/>
    <link rel="stylesheet" th:href="@{/vuexy/assets/vendor/fonts/tabler-icons.css}">
    <link th:href="@{/froala_editor/css/froala_style.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/froala_editor/css/froala_editor.pkgd.min.css}" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" th:href="@{/vuexy/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.css}"/>
    <link rel="stylesheet" th:href="@{/vuexy/assets/vendor/libs/spinkit/spinkit.css}"/>
    <link rel="stylesheet" th:href="@{/vuexy/assets/vendor/libs/animate-css/animate.css}"/>
    <link rel="stylesheet" th:href="@{/vuexy/assets/vendor/libs/sweetalert2/sweetalert2.css}"/>

    <script th:src="@{/vuexy/assets/vendor/libs/sweetalert2/sweetalert2.js}"></script>
    <script type="text/javascript" th:src="@{/froala_editor/js/froala_editor.pkgd.min.js}"></script>
    <script th:src="@{/jquery/jquery-3.7.1.min.js}"></script>
    <script th:src="@{/htmx/htmx.min.js}"></script>

    <script th:inline="javascript">
        let contextPath = '[[@{/}]]'.replaceAll("\"", "");
        if (contextPath !== "/" && contextPath.endsWith("/")) {
            contextPath = contextPath.slice(0, -1);
        }
    </script>
    <style>
        .active-buttonMy {
            background: currentColor;
        }

        .btn-logout {
            background: #334A2E;
            border: #334A2E;
        }

        .btn-logout:hover {
            background: #083b08 !important;
        }

        .btn-green {
            background: #337D5A;
            border: #337D5A;
            color: white;
        }

        .btn-green:hover {
            color: white;
            background: #276046 !important;
        }

        .button-dropdown:hover {
            background: rgba(108, 184, 108, 0.57) !important;
            color: white;
        }

        .button-dropdown-logout:hover {
            background: rgba(255, 36, 43, 0.57) !important;
            color: white;
        }

        .btn-logout:focus,
        .btn-logout[aria-expanded="true"] {
            background: #083b08 !important;
            box-shadow: none;
        }

        .title-out {
            font-size: large;
            font-weight: bold;
            color: green;
        }

        .title-out-user {
            font-size: x-large;
            font-weight: bold;
            color: black;
        }

        .sk-primary .sk-rect {
            background-color: green;
        }

        .sidebar-title {
            color: #029f02 !important;
            border-bottom: 1px solid #029f02 !important;;
        }

        .sidebar-icon-green {
            color: #029f02 !important;
            fill: #029f02 !important;
            stroke: #029f02 !important;
        }

        .sidebar-icon-white {
            color: #ffffff;
        }

        .datepicker table tr td.active,
        .datepicker table tr td.active:hover,
        .datepicker table tr td.active.disabled,
        .datepicker table tr td.active.disabled:hover {
            background-image: none !important;
            background-color: #28a745 !important;
            color: #fff !important;
        }

        .datepicker table tr td.today,
        .datepicker table tr td.today:hover,
        .datepicker table tr td.today.disabled,
        .datepicker table tr td.today.disabled:hover {
            background-color: #e2f2e6 !important;
            border-color: #28a745 !important;
        }

        .datepicker table tr td.day:hover,
        .datepicker table tr td.day.focused {
            background: #f0fdf4 !important;
            cursor: pointer;
        }

        .form-control {
            border-color: #ced4da;
        }

        .form-control:focus {
            color: #212529;
            background-color: #fff;
            border-color: #28a745 !important;
            outline: 0;
            box-shadow: 0 0 0 0.05rem rgba(40, 167, 69, 0.25) !important;
        }

        #dateOfOrdering_:focus {
            border-color: #28a745 !important;
            box-shadow: 0 0 0 0.05rem rgba(40, 167, 69, 0.25) !important;
        }

        .input-group-merge .form-control:focus,
        .input-group-merge .form-control:focus ~ .input-group-text {
            border-color: #28a745 !important;
        }

        .input-group-merge:focus-within {
            box-shadow: 0 0 0 0.05rem rgba(40, 167, 69, 0.25);
            border-radius: 0.375rem;
        }

        .input-group-merge .form-control:focus {
            box-shadow: none !important;
        }

        .input-group-merge .form-control:focus ~ .input-group-text i {
            color: #28a745;
        }
    </style>
</head>

<body>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">

    <!-- Layout container -->
    <div class="layout-container">
        <!-- Menu -->
        <th:block th:insert="~{admin/blocks/sidebar::sidebar}"></th:block>
        <!--/ Menu -->
        <!-- Layout page -->
        <div class="layout-page">
            <!-- Navbar -->
            <th:block th:insert="~{admin/blocks/navbar::navbar}"></th:block>
            <!--/ Navbar -->
            <!-- Content wrapper -->
            <div class="content-wrapper justify-content-center">
                <!-- Content -->
                <div layout:fragment="content">

                </div>
                <!--/ Content -->
                <!-- Content area backdrop -->
                <div class="content-backdrop fade"></div>
            </div>
            <!--/ Content wrapper -->
        </div>
        <!--/ Layout page -->
    </div>
    <!--/ Layout container -->
    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
    <!-- Drag Target Area To SlideIn Menu On Small Screens -->
    <div class="drag-target"></div>
</div>
<!--/ Layout wrapper -->

<div layout:fragment="modal-content"></div>

<div class="modal fade show" id=" " tabindex="-1" aria-modal="true" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header text-center" style="font-size: 20px" th:text="#{text.areYouSureToExit}"></div>
            <div class="modal-footer">
                <a th:href="@{/logout}" class="btn btn-danger float-end" th:text="#{text.logout}"></a>
                <button class="btn btn-secondary float-end" data-bs-dismiss="modal"
                        th:text="#{value.status.cancel}"></button>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div layout:fragment="modal-content" class="modal fade" id="ModalForDelete" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Are you sure to delete it?</h5>
            </div>
            <div class="modal-footer justify-content-end">
                <a type="button" id="modal-btnDelete_" class="btn btn-danger">
                    Delete
                </a>
                <button type="button" class="btn btn-label-secondary" data-bs-dismiss="modal">
                    Cancel
                </button>
            </div>
        </div>
    </div>
    <script th:src="@{/vuexy/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.js}"></script>
</div>
<!--/ Modal -->

<script th:src="@{/vuexy/assets/vendor/libs/bootstrap-datepicker/bootstrap-datepicker.js}"></script>
<script>
    function focusInput(element) {
        const $input = $(element).closest('.input-group').find('input');
        if ($input.length > 0) {
            $input.focus();
        }
    }
</script>
<script th:src="@{/vuexy/assets/vendor/js/helpers.js}"></script>
<script th:src="@{/vuexy/assets/js/config.js}"></script>
<script th:src="@{/vuexy/dist/js/bootstrap.js}"></script>
<script th:src="@{/vuexy/assets/vendor/js/menu.js}"></script>
<script th:src="@{/vuexy/assets/js/main.js}"></script>
<script th:src="@{/vuexy/assets/vendor/libs/block-ui/block-ui.js}"></script>
<script th:src="@{/js/messageLocal.js}"></script>

<script>
    $(document).ready(function () {
        invokeBlockUI();
        $('#btn-logout').on('click', invokeLogoutModal);
    });

    function invokeLogoutModal() {
        let modal = new bootstrap.Modal(document.querySelector("#ModalForLogout"));
        modal.show();
    }

    function invokeBlockUI() {
        $("#card-block").block({
            message: '<div class="sk-wave sk-primary mx-auto"><div class="sk-rect sk-wave-rect"></div> <div class="sk-rect sk-wave-rect"></div> <div class="sk-rect sk-wave-rect"></div> <div class="sk-rect sk-wave-rect"></div> <div class="sk-rect sk-wave-rect"></div></div>',
            css: {
                backgroundColor: "transparent",
                border: "0"
            },
            overlayCSS: {
                backgroundColor: "#fff",
                opacity: 0.8
            }
        });
    }

    function setCookie(name, value, days) {
        let expires = "";
        if (days) {
            let date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + "; path=/" + expires + "; SameSite=Lax";
    }

    function getCookie(name) {
        let match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
        return match ? match[2] : null;
    }

    function selectedLanguage() {
        $(".button-dropdown").on("click", function () {
            let lang = $(this).attr("data-lang");
            if (lang) {
                setCookie("lang", lang, 30);
                window.location.reload();
            }
        });

        window.addEventListener("load", function () {
            let lang = getCookie("lang");
            if (lang) {
                document.documentElement.lang = lang;
                let $languageCode = $("#languageCode_");
                if ($languageCode) {
                    $languageCode.val(lang);
                }
            }
        });
    }

    function getCurrentLang() {
        return document.documentElement.lang;
    }

    function returnUserStatus(status) {
        let currentLang = getCurrentLang();
        if (status === 'legal') {
            if (currentLang === 'uk') {
                return 'Юридичне обличчя';
            } else if (currentLang === 'en') {
                return 'Legal';
            }
        } else if (status === 'fop') {
            if (currentLang === 'uk') {
                return 'Адреса Фоп';
            } else if (currentLang === 'en') {
                return 'Address Fop';
            }
        } else if (status === 'individual') {
            if (currentLang === 'uk') {
                return 'Фізичне обличчя';
            } else if (currentLang === 'en') {
                return 'Individual';
            }
        }
    }

    function confirmAndPathDelete(ids, path, cb) {
        const messageText = messages.modalDelete;
        Swal.fire({
            title: `<div style="width: 100%; margin-top: -35px; margin-left: 15px;"> ${messages.areYouSure + '?'} </div>`,
            text: messageText + '...',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: messages.yesDeleteId + '!',
            cancelButtonText: messages.cancel,
            customClass: {
                confirmButton: 'btn me-1 btn-danger',
                cancelButton: 'btn btn-label-secondary'
            },
            buttonsStyling: false,
            didOpen: () => {
                let cancelButton = Swal.getCancelButton();
                if (cancelButton) {
                    cancelButton.style.color = '#000000';
                }
            }
        }).then(function (result) {
            if (result.isConfirmed) {
                Swal.fire({
                    icon: 'success',
                    title: `<div style="width: 100%; margin-top: -35px; margin-left: 15px;"> ${messages.deleted + '!'} </div>`,
                    text: messages.successDeleted + '.',
                    customClass: {
                        confirmButton: 'btn btn-success'
                    }
                }).then(() => {
                    requestDeleteObjects(ids, path, cb);
                });
            }
        });
    }

    function requestDeleteObjects(ids, path, cb) {
        let request = new XMLHttpRequest();
        request.open('DELETE', path);
        request.setRequestHeader('Content-Type', 'application/json');
        request.addEventListener('load', function () {
            if (request.status === 200 && cb) {
                cb();
            }
        });
        request.send(JSON.stringify(ids));
    }
</script>
<script th:inline="javascript">
    const messages = {
        invalidNumberId: /*[[#{error.field.invalid.number.id}]]*/ 'default',
        invalidNumber: /*[[#{error.field.invalid.number}]]*/ 'default',
        filterProduct: /*[[#{error.filter.product}]]*/ 'default',
        filterAmount: /*[[#{error.filter.totalAmount}]]*/ 'default',
        filterPrice: /*[[#{error.filter.totalPrice}]]*/ 'default',
        filterDate: /*[[#{error.filter.date}]]*/ 'default',
        filterPhone: /*[[#{error.filter.phone}]]*/ 'default',
        areYouSureToDeleteIt: /*[[#{text.areYouSure}]]*/ 'default',
        noCallAnyoneCalls: /*[[#{text.noCallAnyoneCalls}]]*/ 'default',
        warning: /*[[#{text.warning}]]*/ 'default',
        areYouSure: /*[[#{text.areYouSure2}]]*/ 'default',
        yesDeleteId: /*[[#{text.yesDeleteId}]]*/ 'default',
        deleted: /*[[#{value.status.deleted}]]*/ 'default',
        successDeleted: /*[[#{text.successDeleted}]]*/ 'default',
        modalDelete: /*[[#{text.modal.delete}]]*/ 'default',
        cancel: /*[[#{value.status.cancel}]]*/ 'default'
    };
</script>
</body>
</html>